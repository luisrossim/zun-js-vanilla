import"./style-CQFIdI3L.js";function i(e,t){const a=document.querySelector("#submit-create"),n=document.querySelector("#toast");n.innerHTML="",n.classList.remove("bg-green-600","bg-red-600");let s=e=="success"?"bg-green-600":"bg-red-600";n.classList.add(s);let l=document.createElement("i"),r=e=="success"?"fa-check":"fa-xmark";l.classList.add("fa","mr-2",r),n.appendChild(l);let c=document.createElement("span");c.textContent=t,n.appendChild(c),n.style.display="block",a.disabled=!0,setTimeout(()=>{n.style.display="none",a.disabled=!1},2e3)}const h=document.getElementById("open-modal-create-btn"),L=document.querySelectorAll(".close-modal-btn"),g=document.querySelector("#modal-create-overlay"),y=document.querySelector("#modal-remove-overlay"),T=document.querySelector("#inputTarefa"),S=document.querySelector("#tarefa-remove-label"),E=document.querySelector("#submit-create"),q=document.querySelector("#submit-remove");let f=null;function M(){g.style.display="flex",T.value=""}function k(e,t){f=e,y.style.display="flex",S.innerHTML=`
    <div class="flex items-center gap-2">
      <p class="text-neutral-400 text-xs">#${e}</p>
      <p class="font-light">${t}</p>
    </div>
  `}function m(){g.style.display="none",y.style.display="none",f=null}h.addEventListener("click",M);L.forEach(e=>{e.addEventListener("click",m)});q.addEventListener("click",()=>{I(f)});E.addEventListener("click",()=>{$(T.value)});function u(e,t){let a=JSON.stringify(t);localStorage.setItem(e,a)}function b(e){return JSON.parse(localStorage.getItem(e))}let p=parseInt(b("count"))||0;function d(){return b("listaTarefas")||[]}function B(e){let t=H(e);if(!t.valid)return{status:"error",message:t.message};let a=d();const n={id:p++,nome:e,criadoEm:new Date().toLocaleString(),finalizadoEm:null,concluida:!1};return a.push(n),u("count",p),u("listaTarefas",a),{status:"success",tarefa:n}}function H(e){return e===""?{valid:!1,message:"Nome da tarefa inexistente!"}:e.trim()===""?{valid:!1,message:"Erro ao adicionar tarefa!"}:e.length>50?{valid:!1,message:"O nome da tarefa é muito longo!"}:{valid:!0}}function N(e){let t=d();const a=t.filter(n=>n.id!==e);return t.length===a.length?{status:"error",message:"Erro ao remover tarefa!"}:(u("listaTarefas",a),{status:"success",tarefas:a})}function x(e,t){let a=d();const n=a.find(s=>s.id===e);n&&(n.concluida=t,n.finalizadoEm=t?new Date().toLocaleString():null,u("listaTarefas",a))}o();const w=document.querySelector("#buttonConcluidas");w.addEventListener("click",D);function $(e){let t=B(e);if(t.status==="error"){i(t.status,t.message);return}m(),o(),i("success","Tarefa adicionada com sucesso!")}function I(e){let t=N(e);if(t.status==="error"){i(t.status,t.message);return}m(),o(),i("success","Tarefa removida com sucesso!")}function o(){let e=d();z(e);let t=document.querySelector("#listaTarefas"),a=document.querySelector("#listaTarefasConcluidas");t.innerHTML="",a.innerHTML="";let n=0,s=0;if(e.forEach(l=>{if(l.concluida===!1){const r=P(l),c=r.querySelector(".concluir-tarefa-btn"),C=r.querySelector(".remover-tarefa-btn");c.addEventListener("click",()=>O(l.id)),C.addEventListener("click",()=>k(l.id,l.nome)),t.appendChild(r),s++}else{const r=j(l);r.querySelector(".btn-concluir-tarefa").addEventListener("click",()=>R(l.id)),a.appendChild(r),n++}}),s==0){let l=v("fa-pencil","Não há tarefas pendentes!");t.appendChild(l)}if(n==0){let l=v("fa-check-circle","Não há tarefas concluídas!");a.appendChild(l)}}function z(e){let t=document.querySelector("#countTarefas"),a=e.filter(l=>!l.concluida).length;t.innerHTML="("+a+")";let n=document.querySelector("#countConcluidas"),s=e.filter(l=>l.concluida).length;n.innerHTML="("+s+")"}function P(e){const t=document.createElement("li");return t.className="flex justify-between font-light px-4 py-1",t.innerHTML=`
        <div class="flex items-center gap-3">
            <button class="concluir-tarefa-btn fa-regular fa-circle"></button>
            <span>${e.nome}</span>
        </div>
        <div class="flex gap-2 justify-end text-xs">
            <small class="self-center text-neutral-400">#${e.id}</small>
            <button class="remover-tarefa-btn fa fa-trash text-red-600 rounded-full p-2"></button>
        </div>
    `,t}function j(e){const t=document.createElement("li");return t.className="flex justify-between text-neutral-400 opacity-50",t.innerHTML=`
        <div class="flex items-center font-light px-4 py-1 gap-3">
            <button class="btn-concluir-tarefa fa-solid fa-check-circle"></button>
            <span class="line-through">${e.nome}</span>
        </div>
        <div class="flex gap-2 justify-end text-xs">
            <small class="self-center px-2 text-neutral-600">${e.finalizadoEm}</small>
        </div>
    `,t}function v(e,t){const a=document.createElement("div");return a.className="flex flex-col gap-2 items-center justify-center text-neutral-400 px-4 py-2 h-52",a.innerHTML=`<i class="fa ${e} text-xl"></i>${t}`,a}function O(e){x(e,!0),o()}function R(e){x(e,!1),o()}function D(){let e=document.querySelector("#iconConcluidas");e.classList.contains("fa-caret-down")?e.classList.replace("fa-caret-down","fa-caret-up"):e.classList.replace("fa-caret-up","fa-caret-down"),document.querySelector("#listaTarefasConcluidas").classList.toggle("visible")}
